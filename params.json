{"name":"ABySS","tagline":"genome sequence assembler","body":"ABySS is a *de novo* sequence assembler intended for short paired-end\r\nreads and large genomes.\r\n\r\nContents\r\n========\r\n\r\n* [Quick Start](#quick-start)\r\n\t* [Install ABySS on Debian or Ubuntu](#install-abyss-on-debian-or-ubuntu)\r\n\t* [Install ABySS on Mac OS X](#install-abyss-on-mac-os-x)\r\n* [Dependencies](#dependencies)\r\n* [Compiling ABySS from GiHub](#compiling-abyss-from-github)\r\n* [Compiling ABySS from source](#compiling-abyss-from-source)\r\n* [Assembling a paired-end library](#assembling-a-paired-end-library)\r\n* [Assembling multiple libraries](#assembling-multiple-libraries)\r\n* [Scaffolding](#scaffolding)\r\n* [Rescaffolding with long sequences](#rescaffolding-with-long-sequences)\r\n* [Assembling using a paired de Bruijn graph](#assembling-using-a-paired-de-bruijn-graph)\r\n* [Assembling a strand-specific RNA-Seq library](#assembling-a-strand-specific-rna-seq-library)\r\n* [Optimizing the parameter k](#optimizing-the-parameter-k)\r\n* [Parallel processing](#parallel-processing)\r\n* [Running ABySS on a cluster](#running-abyss-on-a-cluster)\r\n* [Using the DIDA alignment framework](#using-the-dida-alignment-framework)\r\n* [Assembly Parameters](#assembly-parameters)\r\n* [ABySS programs](#abyss-programs)\r\n* [Export to SQLite Database](#export-to-sqlite-database)\r\n* [Publications](#publications)\r\n* [Support](#support)\r\n* [Authors](#authors)\r\n\r\nQuick Start\r\n===========\r\n\r\n## Install ABySS on Debian or Ubuntu\r\n\r\nRun the command\r\n\r\n\tsudo apt-get install abyss\r\n\r\nor download and install the\r\n[Debian package](http://www.bcgsc.ca/platform/bioinfo/software/abyss).\r\n\r\n## Install ABySS on Mac OS X\r\n\r\nInstall [Homebrew](http://brew.sh/), and run the commands\r\n\r\n\tbrew install homebrew/science/abyss\r\n\r\n## Assemble a small synthetic data set\r\n\r\n\twget http://www.bcgsc.ca/platform/bioinfo/software/abyss/releases/1.3.4/test-data.tar.gz\r\n\ttar xzvf test-data.tar.gz\r\n\tabyss-pe k=25 name=test \\\r\n\t\tin='test-data/reads1.fastq test-data/reads2.fastq'\r\n\r\n## Calculate assembly contiguity statistics\r\n\r\n\tabyss-fac test-unitigs.fa\r\n\r\nDependencies\r\n============\r\n\r\nABySS requires the following libraries:\r\n\r\n* [Boost](http://www.boost.org/)\r\n* [Open MPI](http://www.open-mpi.org)\r\n* [sparsehash](https://code.google.com/p/sparsehash/)\r\n* [SQLite](http://www.sqlite.org/)\r\n\r\nABySS requires a C++ compiler that supports\r\n[OpenMP](http://www.openmp.org) such as [GCC](http://gcc.gnu.org).\r\n\r\nABySS will receive an error when compiling with Boost 1.51.0 or 1.52.0\r\nsince they contain a bug. Later versions of Boost compile without error.\r\n\r\nCompiling ABySS from GitHub\r\n===========================\r\n\r\nWhen installing ABySS from GitHub source the following tools are\r\nrequired:\r\n\r\n* [Autoconf](http://www.gnu.org/software/autoconf)\r\n* [Automake](http://www.gnu.org/software/automake)\r\n\r\nTo generate the configure script and make files:\r\n\r\n\t./autogen.sh\r\n\r\nSee \"Compiling ABySS from source\" for further steps.\r\n\r\nCompiling ABySS from source\r\n===========================\r\n\r\nTo compile and install ABySS in `/usr/local`:\r\n\r\n\t./configure\r\n\tmake\r\n\tsudo make install\r\n\r\nTo install ABySS in a specified directory:\r\n\r\n\t./configure --prefix=/opt/abyss\r\n\tmake\r\n\tsudo make install\r\n\r\nABySS uses OpenMP for parallelization, which requires a modern\r\ncompiler such as GCC 4.2 or greater. If you have an older compiler, it\r\nis best to upgrade your compiler if possible. If you have multiple\r\nversions of GCC installed, you can specify a different compiler:\r\n\r\n\t./configure CC=gcc-4.6 CXX=g++-4.6\r\n\r\nABySS requires the Boost C++ libraries. Many systems come with Boost\r\ninstalled. If yours does not, you can download\r\n[Boost](http://www.boost.org/users/download).\r\nIt is not necessary to compile Boost before installing it. The Boost\r\nheader file directory should be found at `/usr/include/boost`, in the\r\nABySS source directory, or its location specified to `configure`:\r\n\r\n\t./configure --with-boost=/usr/local/include\r\n\r\nIf you wish to build the parallel assembler with MPI support,\r\nMPI should be found in `/usr/include` and `/usr/lib` or its location\r\nspecified to `configure`:\r\n\r\n\t./configure --with-mpi=/usr/lib/openmpi\r\n\r\nABySS should be built using the sparsehash library to reduce memory\r\nusage, although it will build without. sparsehash should be found in\r\n`/usr/include` or its location specified to `configure`:\r\n\r\n\t./configure CPPFLAGS=-I/usr/local/include\r\n\r\nIf SQLite is installed in non-default directories, its location can be\r\nspecified to `configure`:\r\n\r\n\t./configure --with-sqlite=/opt/sqlite3\r\n\r\nThe default maximum k-mer size is 64 and may be decreased to reduce\r\nmemory usage or increased at compile time. This value must be a\r\nmultiple of 32 (i.e. 32, 64, 96, 128, etc):\r\n\r\n\t./configure --enable-maxk=96\r\n\r\nIf you encounter compiler warnings, you may ignore them like so:\r\n\r\n\tmake AM_CXXFLAGS=-Wall\r\n\r\nTo run ABySS, its executables should be found in your `PATH`. If you\r\ninstalled ABySS in `/opt/abyss`, add `/opt/abyss/bin` to your `PATH`:\r\n\r\n\tPATH=/opt/abyss/bin:$PATH\r\n\r\nAssembling a paired-end library\r\n===============================\r\n\r\nTo assemble paired reads in two files named `reads1.fa` and\r\n`reads2.fa` into contigs in a file named `ecoli-contigs.fa`, run the\r\ncommand:\r\n\r\n\tabyss-pe name=ecoli k=64 in='reads1.fa reads2.fa'\r\n\r\nThe parameter `in` specifies the input files to read, which may be in\r\nFASTA, FASTQ, qseq, export, SRA, SAM or BAM format and compressed with\r\ngz, bz2 or xz and may be tarred. The assembled contigs will be stored\r\nin `${name}-contigs.fa`.\r\n\r\nA pair of reads must be named with the suffixes `/1` and `/2` to\r\nidentify the first and second read, or the reads may be named\r\nidentically. The paired reads may be in separate files or interleaved\r\nin a single file.\r\n\r\nReads without mates should be placed in a file specified by the\r\nparameter `se` (single-end). Reads without mates in the paired-end\r\nfiles will slow down the paired-end assembler considerably during the\r\n`abyss-fixmate` stage.\r\n\r\nAssembling multiple libraries\r\n=============================\r\n\r\nThe distribution of fragment sizes of each library is calculated\r\nempirically by aligning paired reads to the contigs produced by the\r\nsingle-end assembler, and the distribution is stored in a file with\r\nthe extension `.hist`, such as `ecoli-3.hist`. The N50 of the\r\nsingle-end assembly must be well over the fragment-size to obtain an\r\naccurate empirical distribution.\r\n\r\nHere's an example scenario of assembling a data set with two different\r\nfragment libraries and single-end reads:\r\n\r\n * Library `pe200` has reads in two files,\r\n   `pe200_1.fa` and `pe200_2.fa`.\r\n * Library `pe500` has reads in two files,\r\n   `pe500_1.fa` and `pe500_2.fa`.\r\n * Single-end reads are stored in two files, `se1.fa` and `se2.fa`.\r\n\r\nThe command line to assemble this example data set is:\r\n\r\n\tabyss-pe k=64 name=ecoli lib='pe200 pe500' \\\r\n\t\tpe200='pe200_1.fa pe200_2.fa' pe500='pe500_1.fa pe500_2.fa' \\\r\n\t\tse='se1.fa se2.fa'\r\n\r\nThe empirical distribution of fragment sizes will be stored in two\r\nfiles named `pe200-3.hist` and `pe500-3.hist`. These files may be\r\nplotted to check that the empirical distribution agrees with the\r\nexpected distribution. The assembled contigs will be stored in\r\n`${name}-contigs.fa`.\r\n\r\nScaffolding\r\n===========\r\n\r\nLong-distance mate-pair libraries may be used to scaffold an assembly.\r\nSpecify the names of the mate-pair libraries using the parameter `mp`.\r\nThe scaffolds will be stored in the file `${name}-scaffolds.fa`.\r\nHere's an example of assembling a data set with two paired-end\r\nlibraries and two mate-pair libraries:\r\n\r\n\tabyss-pe k=64 name=ecoli lib='pe1 pe2' mp='mp1 mp2' \\\r\n\t\tpe1='pe1_1.fa pe1_2.fa' pe2='pe2_1.fa pe2_2.fa' \\\r\n\t\tmp1='mp1_1.fa mp1_2.fa' mp2='mp2_1.fa mp2_2.fa'\r\n\r\nThe mate-pair libraries are used only for scaffolding and do not\r\ncontribute towards the consensus sequence.\r\n\r\nRescaffolding with long sequences\r\n=================================\r\n\r\nLong sequences such as RNA-Seq contigs can be used to rescaffold an\r\nassembly. Sequences are aligned using BWA-MEM to the assembled\r\nscaffolds. Additional scaffolds are then formed between scaffolds that\r\ncan be linked unambiguously when considering all BWA-MEM alignments.\r\n\r\nSimilar to scaffolding, the names of the datasets can be specified with\r\nthe `long` parameter. These scaffolds will be stored in the file\r\n`${name}-trans-scaffs.fa`. The following is an example of an assembly with PET, MPET and an RNA-Seq assembly:\r\n\r\n\tabyss-pe k=64 name=ecoli lib='pe1 pe2' mp='mp1 mp2' long=long1 \\\r\n\t\tpe1='pe1_1.fa pe1_2.fa' pe2='pe2_1.fa pe2_2.fa' \\\r\n\t\tmp1='mp1_1.fa mp1_2.fa' mp2='mp2_1.fa mp2_2.fa' \\\r\n\t\tlong1=long1.fa\r\n\r\nAssembling using a paired de Bruijn graph\r\n=========================================\r\n\r\nAssemblies may be performed using a _paired de Bruijn graph_ instead\r\nof a standard de Bruijn graph.  In paired de Bruijn graph mode, ABySS\r\nuses _k-mer pairs_ in place of k-mers, where each k-mer pair consists of\r\ntwo equal-size k-mers separated by a fixed distance.  A k-mer pair\r\nis functionally similar to a large k-mer spanning the breadth of the k-mer\r\npair, but uses less memory because the sequence in the gap is not stored.\r\nTo assemble using paired de Bruijn graph mode, specify both individual\r\nk-mer size (`K`) and k-mer pair span (`k`). For example, to assemble E.\r\ncoli with a individual k-mer size of 16 and a k-mer pair span of 64:\r\n\r\n\tabyss-pe name=ecoli K=16 k=64 in='reads1.fa reads2.fa'\r\n\r\nIn this example, the size of the intervening gap between k-mer pairs is\r\n32 bp (64 - 2\\*16). Note that the `k` parameter takes on a new meaning\r\nin paired de Bruijn graph mode. `k` indicates kmer pair span in\r\npaired de Bruijn graph mode (when `K` is set), whereas `k` indicates\r\nk-mer size in standard de Bruijn graph mode (when `K` is not set).\r\n\r\nAssembling a strand-specific RNA-Seq library\r\n============================================\r\n\r\nStrand-specific RNA-Seq libraries can be assembled such that the\r\nresulting unitigs, contigs and scaffolds are oriented correctly with\r\nrespect to the original transcripts that were sequenced. In order to\r\nrun ABySS in strand-specific mode, the `SS` parameter must be used as\r\nin the following example:\r\n\r\n\tabyss-pe name=SS-RNA k=64 in='reads1.fa reads2.fa' SS=--SS\r\n\r\nThe expected orientation for the read sequences with respect to the\r\noriginal RNA is RF. i.e. the first read in a read pair is always in\r\nreverse orientation.\r\n\r\nOptimizing the parameter k\r\n==========================\r\n\r\nTo find the optimal value of `k`, run multiple assemblies and inspect\r\nthe assembly contiguity statistics. The following shell snippet will\r\nassemble for every value of `k` from 20 to 40.\r\n\r\n\texport k\r\n\tfor k in {20..40}; do\r\n\t\tmkdir k$k\r\n\t\tabyss-pe -C k$k name=ecoli in=../reads.fa\r\n\tdone\r\n\tabyss-fac k*/ecoli-contigs.fa\r\n\r\nThe default maximum value for `k` is 64. This limit may be changed at\r\ncompile time using the `--enable-maxk` option of configure. It may be\r\ndecreased to 32 to decrease memory usage or increased to 96.\r\n\r\nParallel processing\r\n===================\r\n\r\nThe `np` option of `abyss-pe` specifies the number of processes to\r\nuse for the parallel MPI job. Without any MPI configuration, this will\r\nallow you to use multiple cores on a single machine. To use multiple\r\nmachines for assembly, you must create a `hostfile` for `mpirun`,\r\nwhich is described in the `mpirun` man page.\r\n\r\n*Do not* run `mpirun -np 8 abyss-pe`. To run ABySS with 8 threads, use\r\n`abyss-pe np=8`. The `abyss-pe` driver script will start the MPI\r\nprocess, like so: `mpirun -np 8 ABYSS-P`.\r\n\r\nThe paired-end assembly stage is multithreaded, but must run on a\r\nsingle machine. The number of threads to use may be specified with the\r\nparameter `j`. The default value for `j` is the value of `np`.\r\n\r\nRunning ABySS on a cluster\r\n==========================\r\n\r\nABySS integrates well with cluster job schedulers, such as:\r\n\r\n * SGE (Sun Grid Engine)\r\n * Portable Batch System (PBS)\r\n * Load Sharing Facility (LSF)\r\n * IBM LoadLeveler\r\n\r\nFor example, to submit an array of jobs to assemble every odd value of\r\n`k` between 51 and 63 using 64 processes for each job:\r\n\r\n\tmkdir k{51..63}\r\n\tqsub -N ecoli -pe openmpi 64 -t 51-63:2 \\\r\n\t\t<<<'abyss-pe -C k$SGE_TASK_ID in=/data/reads.fa'\r\n\r\nUsing the DIDA alignment framework\r\n=================================\r\n\r\nABySS supports the use of DIDA (Distributed Indexing Dispatched Alignment),\r\nan MPI-based framework for computing sequence alignments in parallel across\r\nmultiple machines. The DIDA software must be separately downloaded and\r\ninstalled from http://www.bcgsc.ca/platform/bioinfo/software/dida. In\r\ncomparison to the standard ABySS alignment stages which are constrained\r\nto a single machine, DIDA offers improved performance and the ability to\r\nscale to larger targets. Please see the DIDA section of the abyss-pe man\r\npage (in the `doc` subdirectory) for details on usage.\r\n\r\nAssembly Parameters\r\n===================\r\n\r\nParameters of the driver script, `abyss-pe`\r\n\r\n * `a`: maximum number of branches of a bubble [`2`]\r\n * `b`: maximum length of a bubble (bp) [`\"\"`]\r\n * `c`: minimum mean k-mer coverage of a unitig [`sqrt(median)`]\r\n * `d`: allowable error of a distance estimate (bp) [`6`]\r\n * `e`: minimum erosion k-mer coverage [`round(sqrt(median))`]\r\n * `E`: minimum erosion k-mer coverage per strand [1 if sqrt(median) > 2 else 0]\r\n * `j`: number of threads [`2`]\r\n * `k`: size of k-mer (when `K` is not set) or the span of a k-mer pair (when `K` is set)\r\n * `K`: the length of a single k-mer in a k-mer pair (bp)\r\n * `l`: minimum alignment length of a read (bp) [`k`]\r\n * `m`: minimum overlap of two unitigs (bp) [`30`]\r\n * `n`: minimum number of pairs required for building contigs [`10`]\r\n * `N`: minimum number of pairs required for building scaffolds [`n`]\r\n * `p`: minimum sequence identity of a bubble [`0.9`]\r\n * `q`: minimum base quality [`3`]\r\n * `s`: minimum unitig size required for building contigs (bp) [`200`]\r\n * `S`: minimum contig size required for building scaffolds (bp) [`s`]\r\n * `t`: maximum length of blunt contigs to trim [`k`]\r\n * `v`: use `v=-v` for verbose logging, `v=-vv` for extra verbose [`disabled`]\r\n\r\nPlease see the\r\n[abyss-pe](http://manpages.ubuntu.com/abyss-pe.1.html)\r\nmanual page for more information on assembly parameters.\r\n\r\nPossibly, `abyss-pe` parameters can have same names as existing environment variables'. The parameters then cannot be used until the environment variables are unset. To detect such occasions, run the command:\r\n\r\n\tabyss-pe env [options]\r\n\r\nAbove command will report all `abyss-pe` parameters that are set from various origins. However it will not operate ABySS programs.\r\n\r\nABySS programs\r\n==============\r\n\r\n`abyss-pe` is a driver script implemented as a Makefile. Any option of\r\n`make` may be used with `abyss-pe`. Particularly useful options are:\r\n\r\n * `-C dir`, `--directory=dir`\r\n   Change to the directory `dir` and store the results there.\r\n * `-n`, `--dry-run`\r\n   Print the commands that would be executed, but do not execute\r\n   them.\r\n\r\n`abyss-pe` uses the following programs, which must be found in your\r\n`PATH`:\r\n\r\n * `ABYSS`: de Bruijn graph assembler\r\n * `ABYSS-P`: parallel (MPI) de Bruijn graph assembler\r\n * `AdjList`: find overlapping sequences\r\n * `DistanceEst`: estimate the distance between sequences\r\n * `MergeContigs`: merge sequences\r\n * `MergePaths`: merge overlapping paths\r\n * `Overlap`: find overlapping sequences using paired-end reads\r\n * `PathConsensus`: find a consensus sequence of ambiguous paths\r\n * `PathOverlap`: find overlapping paths\r\n * `PopBubbles`: remove bubbles from the sequence overlap graph\r\n * `SimpleGraph`: find paths through the overlap graph\r\n * `abyss-fac`: calculate assembly contiguity statistics\r\n * `abyss-filtergraph`: remove shim contigs from the overlap graph\r\n * `abyss-fixmate`: fill the paired-end fields of SAM alignments\r\n * `abyss-map`: map reads to a reference sequence\r\n * `abyss-scaffold`: scaffold contigs using distance estimates\r\n * `abyss-todot`: convert graph formats and merge graphs\r\n\r\nFor a flowchart showing the relationship between these programs,\r\nsee doc/flowchart.pdf.\r\n\r\nExport to SQLite Database\r\n=========================\r\n\r\nABySS has a built-in support for SQLite database to export log values into a SQLite file and/or `.csv` files at runtime.\r\n\r\n## Database parameters\r\nOf `abyss-pe`:\r\n * `db`: path to SQLite repository file [`$(name).sqlite`]\r\n * `species`: name of species to archive [ ]\r\n * `strain`: name of strain to archive [ ]\r\n * `library`: name of library to archive [ ]\r\n\r\nFor example, to export data of species 'Ecoli', strain 'O121' and library 'pe200' into your SQLite database repository named '/abyss/test.sqlite':\r\n\r\n\tabyss-pe db=/abyss/test.sqlite species=Ecoli strain=O121 library=pe200 [other options]\r\n\r\n## Helper programs\r\nFound in your `path`:\r\n * `abyss-db-txt`: create a flat file showing entire repository at a glance\r\n * `abyss-db-csv`: create `.csv` table(s) from the repository\r\n\r\nUsage:\r\n\r\n    abyss-db-txt /your/repository\r\n    abyss-db-csv /your/repository program(s)\r\n\r\nFor example,\r\n\r\n\tabyss-db-txt repo.sqlite\r\n\r\n\tabyss-db-csv repo.sqlite DistanceEst\r\n\tabyss-db-csv repo.sqlite DistanceEst abyss-scaffold\r\n\tabyss-db-csv repo.sqlite --all\r\n\r\nPublications\r\n============\r\n\r\n## [ABySS](http://genome.cshlp.org/content/19/6/1117)\r\n\r\nSimpson, Jared T., Kim Wong, Shaun D. Jackman, Jacqueline E. Schein,\r\nSteven JM Jones, and İnanç Birol.\r\n**ABySS: a parallel assembler for short read sequence data**.\r\n*Genome research* 19, no. 6 (2009): 1117-1123.\r\n[doi:10.1101/gr.089532.108](http://dx.doi.org/10.1101/gr.089532.108)\r\n\r\n## [Trans-ABySS](http://www.nature.com/nmeth/journal/v7/n11/abs/nmeth.1517.html)\r\n\r\nRobertson, Gordon, Jacqueline Schein, Readman Chiu, Richard Corbett,\r\nMatthew Field, Shaun D. Jackman, Karen Mungall et al.\r\n**De novo assembly and analysis of RNA-seq data**.\r\n*Nature methods* 7, no. 11 (2010): 909-912.\r\n[doi:10.1038/10.1038/nmeth.1517](http://dx.doi.org/10.1038/nmeth.1517)\r\n\r\n## [ABySS-Explorer](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=5290690)\r\n\r\nNielsen, Cydney B., Shaun D. Jackman, Inanc Birol, and Steven JM Jones.\r\n**ABySS-Explorer: visualizing genome sequence assemblies**.\r\n*IEEE Transactions on Visualization and Computer Graphics*\r\n15, no. 6 (2009): 881-888.\r\n[doi:10.1109/TVCG.2009.116](http://dx.doi.org/10.1109/TVCG.2009.116)\r\n\r\nSupport\r\n=======\r\n\r\n[Ask a question](https://www.biostars.org/p/new/post/?tag_val=abyss,assembly)\r\non [Biostars](https://www.biostars.org/t/abyss/).\r\n\r\nSubscribe to the\r\n[ABySS mailing list]\r\n(http://groups.google.com/group/abyss-users),\r\n<abyss-users@googlegroups.com>.\r\n\r\nFor questions related to transcriptome assembly, contact the\r\n[Trans-ABySS mailing list]\r\n(http://groups.google.com/group/trans-abyss),\r\n<trans-abyss@googlegroups.com>.\r\n\r\nAuthors\r\n=======\r\n\r\n- **[Shaun Jackman](http://sjackman.ca)**\r\n  — [GitHub/sjackman](https://github.com/sjackman)\r\n  — [@sjackman](https://twitter.com/sjackman)\r\n- **Tony Raymond** — [GitHub/traymond](https://github.com/traymond)\r\n- **Ben Vandervalk** — [GitHub/benvvalk ](https://github.com/benvvalk)\r\n- **Jared Simpson** — [GitHub/jts](https://github.com/jts)\r\n\r\nSupervised by [**Dr. İnanç Birol**](http://www.bcgsc.ca/faculty/inanc-birol).\r\n\r\nCopyright 2014 Canada's Michael Smith Genome Sciences Centre\r\n\r\n[![githalytics.com](https://cruel-carlota.pagodabox.com/af4811df3b40b7d096f6085db2969f0e \"githalytics.com\")](http://githalytics.com/sjackman/abyss)\r\n","google":"UA-54951210-1","note":"Don't delete this file! It's used internally to help with page regeneration."}